import{r as n,_ as me,R as a,a as Q,P as t,c as W,z as b,j as i}from"./index-D4Ddltd5.js";import"./index.esm-DVwSU7ju.js";import{E as Je,D as Pe}from"./ProBadge-CNdAVnvE.js";import{C as pe,a as M}from"./CRow-DMjowzGT.js";import{C as qe,a as Ge}from"./CCardBody-HCNMLPT6.js";import{C as Ue}from"./CCardHeader-BmkCMfNv.js";import{C as Ye}from"./CFormControlWrapper---ddIf9L.js";import{C as dt}from"./CElementCover-BwloVf-s.js";import{u as vt,i as ht}from"./isRTL-iifpYBLd.js";import"./CFormControlValidation-BrZu_tOP.js";var We=function(e){return e&&e.map(function(s,l){return s.options?a.createElement("optgroup",{label:s.label,key:l},We(s.options)):a.createElement("option",{value:s.value,key:l,disabled:s.disabled},s.label)})},de=n.forwardRef(function(e,s){var l=e.id,o=e.name,c=e.options,u=me(e,["id","name","options"]);return a.createElement("select",Q({id:l},l&&!o&&{name:"".concat(l,"-multi-select")},o&&{name:o},{tabIndex:-1,style:{display:"none"}},u,{ref:s}),c&&We(c))});de.propTypes={id:t.string,name:t.string,options:t.array,value:t.oneOfType([t.number,t.string,t.arrayOf(t.string.isRequired)])};de.displayName="CMultiSelectNativeSelect";var ve=n.forwardRef(function(e,s){var l=e.children,o=e.className,c=e.visibleItems,u=e.onScroll,f=n.useRef(null),g=n.useRef(null),v=Je(s,f),h=n.useState(Math.floor(c/2)),S=h[0],x=h[1],C=n.useState(1),k=C[0],q=C[1],A=n.useState(0),p=A[0],d=A[1],w=n.useState(a.Children.count(l)),y=w[0],D=w[1],G=n.useState(0),F=G[0],V=G[1],U=n.useState(c*p+2*F),te=U[0],X=U[1],Z=n.useState(y*p+2*F),le=Z[0],re=Z[1];n.useEffect(function(){f.current&&f.current.scrollTop,f.current&&V(Number.parseFloat(getComputedStyle(f.current).paddingTop))}),n.useEffect(function(){D(a.Children.count(l))},[l]),n.useEffect(function(){X(Math.min(c,y)*p+2*F)},[p,y,F,c]),n.useEffect(function(){re(y*p),f.current&&f.current.scrollTop},[p,y]),n.useEffect(function(){x(Math.floor(c/2))},[c]);var $=function(N){var R=p&&Math.max(Math.ceil(N/p),1);q(R),u&&u(R)};return a.createElement("div",{className:W("virtual-scroller",o),onScroll:function(N){return $(N.target.scrollTop)},ref:v,style:{height:te,overflowY:"auto"}},a.createElement("div",{className:"virtual-scroller-content",style:{height:le},ref:g},a.Children.map(l,function(N,R){if(a.isValidElement(N)&&R+1>Math.max(k-S,0)&&R+1<=k+c+S)return a.cloneElement(N,{className:W(N.props.className,{"virtual-scroller-item-preload":R+1>k+c||R+1<k}),key:R,style:Q({},k>S&&{transform:"translateY(".concat((k-S)*p,"px)")}),ref:function(H){return H&&H.offsetHeight&&d(H.offsetHeight+Number.parseFloat(getComputedStyle(H).marginTop)+Number.parseFloat(getComputedStyle(H).marginBottom))}})})))});ve.propTypes={onScroll:t.func,visibleItems:t.number.isRequired};ve.displayName="CVirtualScroller";var bt=function(e,s){for(var l=e.toLowerCase().replace(/\s/g,"-"),o=l,c=1;s.some(function(u){return String(u.value)===o});)o="".concat(l,"-").concat(c),c++;return[{value:o,label:e,custom:!0}]},ze=function(e,s){if(e.length>0&&s){for(var l=[],o=0,c=s;o<c.length;o++){var u=c[o],f=u.options&&u.options.filter(function(g){return g.label&&g.label.toLowerCase().includes(e.toLowerCase())});(u.label&&u.label.toLowerCase().includes(e.toLowerCase())||f&&f.length>0)&&l.push(Object.assign({},u,f&&f.length>0&&{options:f}))}return l}return s},Be=function(e,s){for(var l=[],o=0,c=e;o<c.length;o++){var u=c[o];if(Array.isArray(u.options)){var f=u.options,g=me(u,["options"]);s&&l.push(g),l.push.apply(l,f)}else l.push(u)}return l},gt=function(e,s){for(var l=e.nextElementSibling;l;){if(l.matches(s))return l;l=l.nextElementSibling}},yt=function(e,s){for(var l=e.previousElementSibling;l;){if(l.matches(s))return l;l=l.previousElementSibling}},Ke=function(e,s,l){var o=b(b([],s,!0),e,!0);l&&(o=o.filter(function(h){return!l.some(function(S){return S.value===h.value})}));for(var c=[],u=function(h){c.some(function(S){return S.value===h.value})||c.push(h)},f=0,g=o;f<g.length;f++){var v=g[f];u(v)}return c},he=n.forwardRef(function(e,s){var l=e.handleOptionOnClick,o=e.loading,c=e.options,u=e.optionsMaxHeight,f=e.optionsStyle,g=e.optionsTemplate,v=e.optionsGroupsTemplate,h=e.searchNoResultsLabel,S=e.selected,x=e.virtualScroller,C=e.visibleItems,k=C===void 0?10:C,q=function(p,d){if((p.code==="Space"||p.key==="Enter")&&(p.preventDefault(),l&&l(d)),p.key==="Down"||p.key==="ArrowDown"){p.preventDefault();var w=p.target,y=gt(w,".form-multi-select-option");y&&y.focus()}if(p.key==="Up"||p.key==="ArrowUp"){p.preventDefault();var w=p.target,D=yt(w,".form-multi-select-option");D&&D.focus()}},A=function(p){return p.length>0?p.map(function(d,w){return"value"in d?a.createElement("div",{className:W("form-multi-select-option",{"form-multi-select-option-with-checkbox":f==="checkbox","form-multi-selected":S.some(function(y){return y.value===d.value}),disabled:d.disabled}),key:w,onClick:function(){return l&&l(d)},onKeyDown:function(y){return q(y,d)},tabIndex:0},g?g(d):d.label):a.createElement("div",{className:"form-multi-select-optgroup-label",key:w},v?v(d):d.label)}):a.createElement("div",{className:"form-multi-select-options-empty"},h)};return a.createElement(a.Fragment,null,x?a.createElement(ve,{className:"form-multi-select-options",visibleItems:k,ref:s},A(c)):a.createElement("div",Q({className:"form-multi-select-options"},u!=="auto"&&{style:{maxHeight:u,overflow:"scroll"}},{ref:s}),A(c)),o&&a.createElement(dt,null))});he.propTypes={handleOptionOnClick:t.func,loading:t.bool,options:t.array.isRequired,optionsMaxHeight:t.oneOfType([t.number,t.string]),optionsStyle:t.oneOf(["checkbox","text"]),optionsTemplate:t.func,optionsGroupsTemplate:t.func,searchNoResultsLabel:t.oneOfType([t.string,t.node]),virtualScroller:t.bool,visibleItems:t.number};he.displayName="CMultiSelectOptions";var be=n.forwardRef(function(e,s){var l=e.children,o=e.multiple,c=e.placeholder,u=e.onRemove,f=e.search,g=e.selected,v=g===void 0?[]:g,h=e.selectionType,S=e.selectionTypeCounterText;return a.createElement("span",{className:W("form-multi-select-selection",{"form-multi-select-selection-tags":o&&h==="tags"}),ref:s},o&&h==="counter"&&!f&&v.length===0&&c,o&&h==="counter"&&!f&&v.length>0&&"".concat(v.length," ").concat(S),o&&h==="tags"&&v.map(function(x,C){if(h==="tags")return a.createElement("span",{className:"form-multi-select-tag",key:C},x.label,!x.disabled&&a.createElement("button",{className:"form-multi-select-tag-delete",type:"button","aria-label":"Close",onClick:function(){return u&&u(x)}}))}),o&&h==="text"&&v.map(function(x,C){return a.createElement("span",{key:C},x.label,C===v.length-1?"":",","Â ")}),!o&&!f&&v.map(function(x){return x.label})[0],l)});be.propTypes={multiple:t.bool,onRemove:t.func,placeholder:t.string,search:t.oneOfType([t.bool,t.oneOf(["external"])]),selected:t.array,selectionType:t.oneOf(["counter","tags","text"]),selectionTypeCounterText:t.string};be.displayName="CMultiSelectSelection";var I=n.forwardRef(function(e,s){var l,o=e.allowCreateOptions,c=e.className,u=e.cleaner,f=u===void 0?!0:u,g=e.clearSearchOnSelect,v=e.disabled,h=e.feedback,S=e.feedbackInvalid,x=e.feedbackValid,C=e.id,k=e.invalid,q=e.label,A=e.loading,p=e.multiple,d=p===void 0?!0:p,w=e.name,y=e.onChange,D=e.onFilterChange,G=e.onHide,F=e.onShow,V=e.options,U=e.optionsMaxHeight,te=U===void 0?"auto":U,X=e.optionsStyle,Z=X===void 0?"checkbox":X,le=e.optionsTemplate,re=e.optionsGroupsTemplate,$=e.placeholder,N=$===void 0?"Select...":$,R=e.required,H=e.resetSelectionOnOptionsChange,Qe=H===void 0?!1:H,ge=e.search,ne=ge===void 0?!0:ge,ye=e.searchNoResultsLabel,Xe=ye===void 0?"No results found":ye,Se=e.selectAll,Ze=Se===void 0?!0:Se,xe=e.selectAllLabel,$e=xe===void 0?"Select all options":xe,Ce=e.selectionType,oe=Ce===void 0?"tags":Ce,Te=e.selectionTypeCounterText,Oe=Te===void 0?"item(s) selected":Te,Ee=e.size,_e=e.text,et=e.tooltipFeedback,ke=e.valid,tt=e.virtualScroller,we=e.visible,lt=we===void 0?!1:we,Ne=e.visibleItems,rt=Ne===void 0?10:Ne,nt=me(e,["allowCreateOptions","className","cleaner","clearSearchOnSelect","disabled","feedback","feedbackInvalid","feedbackValid","id","invalid","label","loading","multiple","name","onChange","onFilterChange","onHide","onShow","options","optionsMaxHeight","optionsStyle","optionsTemplate","optionsGroupsTemplate","placeholder","required","resetSelectionOnOptionsChange","search","searchNoResultsLabel","selectAll","selectAllLabel","selectionType","selectionTypeCounterText","size","text","tooltipFeedback","valid","virtualScroller","visible","visibleItems"]),_=n.useRef(null),ot=Je(s,_),ae=n.useRef(null),ie=n.useRef(null),se=n.useRef(null),T=n.useRef(null),ce=n.useRef(!0),ue=vt(),Re=ue.popper,at=ue.initPopper,it=ue.destroyPopper,je=n.useState(V),fe=je[0],st=je[1],Me=n.useState(lt),z=Me[0],B=Me[1],Ie=n.useState(""),O=Ie[0],K=Ie[1],Le=n.useState([]),m=Le[0],j=Le[1],He=n.useState([]),P=He[0],Ae=He[1],J=n.useMemo(function(){return Be(ne==="external"?b(b([],fe,!0),ze(O,P),!0):ze(O,b(b([],fe,!0),P,!0)),!0)},[fe,O,P]),ee=n.useMemo(function(){return Be(V)},[JSON.stringify(V)]),Y=n.useMemo(function(){return o&&J.some(function(r){return r.label&&r.label.toLowerCase()===O.toLowerCase()})?!1:T.current&&bt(String(O),ee)},[J,O]),ct={placement:ht(_.current)?"bottom-end":"bottom-start",modifiers:[{name:"preventOverflow",options:{boundary:"clippingParents"}},{name:"offset",options:{offset:[0,2]}}]};n.useEffect(function(){if(st(V),Qe)return j([]);var r=ee.filter(function(L){return L.selected===!0}),E=ee.filter(function(L){return L.selected===!1});r&&j(Ke(r,m,E))},[JSON.stringify(V)]),n.useEffect(function(){!ce.current&&D&&D(O)},[O]),n.useEffect(function(){!ce.current&&ie.current&&ie.current.dispatchEvent(new Event("change",{bubbles:!0})),Re&&Re.update()},[JSON.stringify(m)]),n.useEffect(function(){return z&&(F&&F(),window.addEventListener("mouseup",Fe),window.addEventListener("keyup",De),se.current&&ae.current&&at(se.current,ae.current,ct),T.current&&T.current.focus()),function(){G&&G(),K(""),T.current&&(T.current.value=""),window.removeEventListener("mouseup",Fe),window.removeEventListener("keyup",De),it()}},[z]),n.useEffect(function(){ce.current=!1},[]);var De=function(r){r.key==="Escape"&&B(!1)},Fe=function(r){_.current&&_.current.contains(r.target)||B(!1)},ut=function(r){var E=r.target.value;K(E)},ft=function(r){if(r.key==="Enter"&&O&&o){r.preventDefault(),Y&&(j(b(b([],m,!0),Y,!0)),Ae(b(b([],P,!0),Y,!0))),Y||j(b(b([],m,!0),[J.find(function(L){return String(L.label).toLowerCase()===O.toLowerCase()})],!1)),K(""),T.current&&(T.current.value="");return}if(!(O.length>0)&&(r.key==="Backspace"||r.key==="Delete")){var E=m.filter(function(L){return!L.disabled}).pop();E&&j(m.filter(function(L){return L.value!==E.value}))}},Ve=function(r){if(!d){j([r]),B(!1),K(""),T.current&&(T.current.value="");return}r.custom&&!P.some(function(E){return E.value===r.value})&&Ae(b(b([],P,!0),[r],!1)),(g||r.custom)&&(K(""),T.current&&(T.current.value="",T.current.focus())),m.some(function(E){return E.value===r.value})?j(m.filter(function(E){return E.value!==r.value})):j(b(b([],m,!0),[r],!1))},pt=function(){j(Ke(b(b([],ee.filter(function(r){return!r.disabled}),!0),P,!0),m))},mt=function(){j(m.filter(function(r){return r.disabled}))};return a.createElement(Ye,{describedby:nt["aria-describedby"],feedback:h,feedbackInvalid:S,feedbackValid:x,id:C,invalid:k,label:q,text:_e,tooltipFeedback:et,valid:ke},a.createElement(de,{id:C,multiple:d,name:w,options:m,required:R,value:d?m.map(function(r){return r.value.toString()}):m.map(function(r){return r.value})[0],onChange:function(){return y&&y(m)},ref:ie}),a.createElement("div",{className:W("form-multi-select",(l={},l["form-multi-select-".concat(Ee)]=Ee,l.disabled=v,l["is-invalid"]=k,l["is-valid"]=ke,l.show=z,l),c),"aria-expanded":z,ref:ot},a.createElement("div",{className:"form-multi-select-input-group",onClick:function(){return B(!0)},ref:se},a.createElement(be,{multiple:d,onRemove:function(r){return!v&&Ve(r)},placeholder:N,search:ne,selected:m,selectionType:oe,selectionTypeCounterText:Oe},ne&&a.createElement("input",Q({type:"text",className:"form-multi-select-search",disabled:v,autoComplete:"off",onChange:ut,onKeyDown:ft},m.length===0&&{placeholder:N},m.length>0&&oe==="counter"&&{placeholder:"".concat(m.length," ").concat(Oe)},m.length>0&&!d&&{placeholder:m.map(function(r){return r.label})[0]},d&&m.length>0&&oe!=="counter"&&{size:O.length+2},{ref:T}))),a.createElement("div",{className:"form-multi-select-buttons"},!v&&f&&m.length>0&&a.createElement("button",{type:"button",className:"form-multi-select-cleaner",onClick:function(){return mt()}}),a.createElement("button",{type:"button",className:"form-multi-select-indicator",onClick:function(r){r.preventDefault(),r.stopPropagation(),B(!z)}}))),a.createElement("div",{className:"form-multi-select-dropdown",role:"menu",ref:ae},d&&Ze&&a.createElement("button",{type:"button",className:"form-multi-select-all",onClick:function(){return pt()}},$e),a.createElement(he,{handleOptionOnClick:function(r){return!v&&Ve(r)},loading:A,options:J.length===0&&o?Y||[]:J,optionsMaxHeight:te,optionsStyle:Z,optionsTemplate:le,optionsGroupsTemplate:re,searchNoResultsLabel:Xe,selected:m,virtualScroller:tt,visibleItems:rt}))))});I.propTypes=Q({className:t.string,cleaner:t.bool,clearSearchOnSelect:t.bool,disabled:t.bool,loading:t.bool,multiple:t.bool,name:t.string,onChange:t.func,onFilterChange:t.func,onHide:t.func,onShow:t.func,options:t.array.isRequired,optionsMaxHeight:t.oneOfType([t.number,t.string]),optionsStyle:t.oneOf(["checkbox","text"]),optionsTemplate:t.func,optionsGroupsTemplate:t.func,placeholder:t.string,required:t.bool,resetSelectionOnOptionsChange:t.bool,search:t.oneOfType([t.bool,t.oneOf(["external"])]),searchNoResultsLabel:t.oneOfType([t.string,t.node]),selectAll:t.bool,selectAllLabel:t.oneOfType([t.string,t.node]),selectionType:t.oneOf(["counter","tags","text"]),selectionTypeCounterText:t.string,size:t.oneOf(["sm","lg"]),virtualScroller:t.bool,visible:t.bool,visibleItems:t.number},Ye.propTypes);I.displayName="CMultiSelect";const jt=()=>{const e=[{value:0,label:"Angular"},{value:1,label:"Bootstrap"},{value:2,label:"React.js",selected:!0},{value:3,label:"Vue.js"},{label:"backend",options:[{value:4,label:"Django"},{value:5,label:"Laravel"},{value:6,label:"Node.js"}]}];return i.jsxs(pe,{children:[i.jsx(M,{xs:12,children:i.jsxs(qe,{className:"mb-4",children:[i.jsxs(Ue,{children:[i.jsx("strong",{children:"CoreUI React Multi Select"})," ",i.jsx("small",{children:"with Checkbox (Default Style)"})]}),i.jsx(Ge,{children:i.jsx(Pe,{href:"forms/multi-select",children:i.jsxs(pe,{children:[i.jsx(M,{md:3,children:i.jsx(I,{options:e,multiple:!1})}),i.jsx(M,{md:3,children:i.jsx(I,{options:e,selectionType:"text"})}),i.jsx(M,{md:3,children:i.jsx(I,{options:e,selectionType:"tags"})}),i.jsx(M,{md:3,children:i.jsx(I,{options:e,selectionType:"counter"})})]})})})]})}),i.jsx(M,{xs:12,children:i.jsxs(qe,{className:"mb-4",children:[i.jsxs(Ue,{children:[i.jsx("strong",{children:"CoreUI React Multi Select"})," ",i.jsx("small",{children:"with Text"})]}),i.jsx(Ge,{children:i.jsx(Pe,{href:"forms/multi-select",children:i.jsxs(pe,{children:[i.jsx(M,{md:3,children:i.jsx(I,{options:e,optionsStyle:"text",multiple:!1})}),i.jsx(M,{md:3,children:i.jsx(I,{options:e,optionsStyle:"text",selectionType:"text"})}),i.jsx(M,{md:3,children:i.jsx(I,{options:e,optionsStyle:"text",selectionType:"tags"})}),i.jsx(M,{md:3,children:i.jsx(I,{options:e,optionsStyle:"text",selectionType:"counter"})})]})})})]})})]})};export{jt as default};
