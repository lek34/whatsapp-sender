import{r as c,R as t,c as x,P as n,_ as un,a as H}from"./index-D4Ddltd5.js";import{C as S}from"./CButton-CtFRGoiF.js";import{C as Fe}from"./CFormControlWrapper---ddIf9L.js";import{E as Le}from"./ProBadge-CNdAVnvE.js";import{u as sn,i as fn}from"./isRTL-iifpYBLd.js";var Z=c.forwardRef(function(e,o){var i=e.children,l=e.className,u=e.container,s=u===void 0?"dropdown":u,m=e.disabled,k=e.dropdownClassNames,h=e.footer,v=e.footerContent,a=e.onHide,p=e.onShow,g=e.toggler,V=e.visible,N=c.useRef(null),z=Le(o,N),E=c.useRef(null),B=c.useRef(null),A=sn(),K=A.initPopper,$=A.destroyPopper,M=c.useState(V),I=M[0],R=M[1],U={placement:fn(N.current)?"bottom-end":"bottom-start",modifiers:[{name:"preventOverflow",options:{boundary:"clippingParents"}},{name:"offset",options:{offset:[0,2]}}]};c.useEffect(function(){R(V)},[V]),c.useEffect(function(){return s!=="inline"&&I&&(p&&p(),window.addEventListener("mouseup",C),window.addEventListener("keyup",j),B.current&&E.current&&K(B.current,E.current,U)),function(){a&&a(),window.removeEventListener("mouseup",C),window.removeEventListener("keyup",j),$()}},[I]);var j=function(F){F.key==="Escape"&&R(!1)},C=function(F){N.current&&N.current.contains(F.target)||R(!1)};switch(s){case"inline":return t.createElement("div",{className:x("picker",l),ref:z},i);default:return t.createElement("div",{className:x(l,{show:I}),onClick:function(){return!m&&R(!0)},ref:z},g&&t.isValidElement(g)&&t.cloneElement(g,{ref:B}),t.createElement("div",{className:k,ref:E},i,h&&v))}});Z.displayName="CPicker";Z.propTypes={children:n.node,className:n.string,container:n.oneOf(["dropdown","inline"]),disabled:n.bool,dropdownClassNames:n.string,footer:n.bool,footerContent:n.node,onHide:n.func,onShow:n.func,toggler:n.node};var dn=function(e){var o=c.useState(!1),i=o[0],l=o[1];return c.useEffect(function(){var u=new IntersectionObserver(function(s){var m=s[0];return l(m.isIntersecting)});return e.current&&u.observe(e.current),function(){return u.disconnect()}},[]),i},D=c.forwardRef(function(e,o){var i=e.elements,l=e.onClick,u=e.selected,s=c.useRef(!0),m=c.useRef(null),k=Le(o,m),h=dn(m);c.useEffect(function(){var a,p,g=(a=m.current)===null||a===void 0?void 0:a.querySelector(".selected");h&&g&&g instanceof HTMLElement&&((p=m.current)===null||p===void 0||p.scrollTo({top:g.offsetTop,behavior:s.current?"auto":"smooth"})),h&&(s.current=!1)},[h,u]);var v=function(a,p){(a.code==="Space"||a.key==="Enter")&&(a.preventDefault(),l&&l(p))};return t.createElement("div",{className:"time-picker-roll-col",ref:k},i.map(function(a,p){return t.createElement("div",{className:x("time-picker-roll-cell",{selected:a.value===u}),key:p,onClick:function(){return l&&l(a.value)},onKeyDown:function(g){return v(g,a.value)},role:"button",tabIndex:0},a.label)}))});D.propTypes={elements:n.array.isRequired,onClick:n.func,selected:n.oneOfType([n.number,n.string])};D.displayName="CTimePickerRollCol";var mn=function(e,o){return e==="am"&&o===12?0:e==="am"?o:e==="pm"&&o===12?12:o+12},vn=function(e){return e%12||12},re=function(e){return e?e instanceof Date?e:new Date("1970-01-01 ".concat(e)):null},ze=function(e,o){return e.toLocaleTimeString(o).includes("AM")?"am":e.toLocaleTimeString(o).includes("PM")||e.getHours()>=12?"pm":"am"},ie=function(e,o,i){var l=new Date,u=new Intl.DateTimeFormat(o,{hour:"numeric",minute:"2-digit",second:"2-digit"});return e.map(function(s){var m;return i==="hour"&&l.setHours(s),i==="minute"&&l.setMinutes(s),i==="second"&&l.setSeconds(s),{value:s,label:((m=u.formatToParts(l).find(function(k){return k.type===i}))===null||m===void 0?void 0:m.value)||""}})},pn=function(e,o,i,l,u){o===void 0&&(o="auto"),i===void 0&&(i=[]),l===void 0&&(l=[]),u===void 0&&(u=[]);var s=o==="auto"&&qe(e)||o===!0,m=Array.isArray(i)&&i.length>0?i:typeof i=="function"?Array.from({length:s?12:24},function(v,a){return s?a+1:a}).filter(function(v){return i(v)}):Array.from({length:s?12:24},function(v,a){return s?a+1:a}),k=Array.isArray(l)&&l.length>0?l:typeof l=="function"?Array.from({length:60},function(v,a){return a}).filter(function(v){return l(v)}):Array.from({length:60},function(v,a){return a}),h=Array.isArray(u)&&u.length>0?u:typeof u=="function"?Array.from({length:60},function(v,a){return a}).filter(function(v){return u(v)}):Array.from({length:60},function(v,a){return a});return{listOfHours:ie(m,e,"hour"),listOfMinutes:ie(k,e,"minute"),listOfSeconds:ie(h,e,"second"),hour12:s}},Ae=function(e,o,i){return i===void 0&&(i="auto"),e?i==="auto"&&qe(o)||i===!0?vn(e.getHours()):e.getHours():""},Me=function(e){return e?e.getMinutes():""},Ie=function(e){return e?e.getSeconds():""},qe=function(e){return["am","AM","pm","PM"].some(function(o){return new Date().toLocaleString(e).includes(o)})},gn=function(e){var o=new Date("1970-01-01 ".concat(e));return o instanceof Date&&o.getTime()},bn=function(e,o){var i=c.useRef();return c.useCallback(function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];var s=function(){clearTimeout(i.current),e.apply(void 0,l)};clearTimeout(i.current),i.current=setTimeout(s,o)},[e,o])},oe,ae,le,ce,ue,se,xe=c.forwardRef(function(e,o){var i,l,u=e.ampm,s=u===void 0?"auto":u,m=e.cancelButton,k=m===void 0?"Cancel":m,h=e.cancelButtonColor,v=h===void 0?"primary":h,a=e.cancelButtonSize,p=a===void 0?"sm":a,g=e.cancelButtonVariant,V=g===void 0?"ghost":g,N=e.className,z=e.cleaner,E=z===void 0?!0:z,B=e.confirmButton,A=B===void 0?"OK":B,K=e.confirmButtonColor,$=K===void 0?"primary":K,M=e.confirmButtonSize,I=M===void 0?"sm":M,R=e.confirmButtonVariant,U=e.container,j=U===void 0?"dropdown":U,C=e.disabled,F=e.feedback,Ke=e.feedbackInvalid,Ue=e.feedbackValid,fe=e.footer,je=fe===void 0?!0:fe,Ge=e.hours,de=e.id,me=e.indicator,_=me===void 0?!0:me,ve=e.inputOnChangeDelay,We=ve===void 0?750:ve,Je=e.inputReadOnly,ee=e.invalid,Qe=e.label,pe=e.locale,P=pe===void 0?"default":pe,ge=e.minutes,G=ge===void 0?!0:ge,Xe=e.name,W=e.onTimeChange,be=e.onHide,ye=e.onShow,ke=e.placeholder,Ye=ke===void 0?"Select time":ke,Ze=e.required,he=e.seconds,J=he===void 0?!0:he,Ce=e.size,$e=e.text,Q=e.time,_e=e.tooltipFeedback,w=e.valid,Ee=e.variant,Te=Ee===void 0?"roll":Ee,en=e.visible,Se=un(e,["ampm","cancelButton","cancelButtonColor","cancelButtonSize","cancelButtonVariant","className","cleaner","confirmButton","confirmButtonColor","confirmButtonSize","confirmButtonVariant","container","disabled","feedback","feedbackInvalid","feedbackValid","footer","hours","id","indicator","inputOnChangeDelay","inputReadOnly","invalid","label","locale","minutes","name","onTimeChange","onHide","onShow","placeholder","required","seconds","size","text","time","tooltipFeedback","valid","variant","visible"]),L=c.useRef(),O=c.useRef(null),we=c.useState(re(Q)),d=we[0],q=we[1],Oe=c.useState(null),Ne=Oe[0],nn=Oe[1],Be=c.useState(w??(ee===!0?!1:void 0)),X=Be[0],ne=Be[1],Re=c.useState(d?ze(new Date(d),P):"am"),te=Re[0],tn=Re[1],Pe=c.useState(en),rn=Pe[0],Y=Pe[1],De=c.useState({listOfHours:[],listOfMinutes:[],listOfSeconds:[],hour12:!1}),f=De[0],on=De[1];c.useEffect(function(){q(Q?re(Q):null)},[Q]),c.useEffect(function(){ne(w??(ee===!0?!1:void 0))},[w,ee]),c.useEffect(function(){on(pn(P,s,Ge,G,J)),O.current&&(O.current.value=d?d.toLocaleTimeString(P,H(H({hour12:f&&f.hour12,hour:"numeric"},G&&{minute:"numeric"}),J&&{second:"numeric"})):""),d&&tn(ze(new Date(d),P))},[d]),c.useEffect(function(){O.current&&O.current.form&&(L.current=O.current.form)},[O]),c.useEffect(function(){L.current&&(L.current.addEventListener("submit",function(r){setTimeout(function(){return Ve(r.target)})}),Ve(L.current))},[L,d]);var He=function(r){r.stopPropagation(),q(null),W&&W(null)},Ve=function(r){if(r.classList.contains("was-validated")){if(d)return ne(!0);ne(!1)}},an=bn(function(r){return gn(r)&&q(re(r))},We),T=function(r,b){var y=d||new Date("1970-01-01");r==="toggle"&&(b==="am"&&y.setHours(y.getHours()-12),b==="pm"&&y.setHours(y.getHours()+12)),r==="hours"&&(f&&f.hour12?y.setHours(mn(te,Number.parseInt(b))):y.setHours(Number.parseInt(b))),r==="minutes"&&y.setMinutes(Number.parseInt(b)),r==="seconds"&&y.setSeconds(Number.parseInt(b)),q(new Date(y)),W&&W(y.toTimeString(),y.toLocaleTimeString(),y)},ln=function(){return t.createElement("div",{className:"time-picker-input-group"},t.createElement("input",{autoComplete:"off",className:"time-picker-input",disabled:C,id:de,name:Xe,onChange:function(r){return an(r.target.value)},placeholder:Ye,readOnly:Je,required:Ze,ref:O}),_&&(typeof _=="boolean"?t.createElement("div",{className:"time-picker-indicator"}):_),E&&d&&(typeof E=="boolean"?t.createElement("div",{className:"time-picker-cleaner",onClick:function(r){return He(r)}}):t.isValidElement(E)&&t.cloneElement(E,{onClick:function(r){return He(r)}})))},cn=function(){return t.createElement(t.Fragment,null,t.createElement("span",{className:"time-picker-inline-icon"}),t.createElement("select",{className:"time-picker-inline-select",disabled:C,onChange:function(r){return T("hours",r.target.value)},value:Ae(d,P)},f&&f.listOfHours.map(function(r,b){return t.createElement("option",{value:r.value.toString(),key:b},r.label)})),G&&t.createElement(t.Fragment,null,t.createElement(t.Fragment,null,":"),t.createElement("select",{className:"time-picker-inline-select",disabled:C,onChange:function(r){return T("minutes",r.target.value)},value:Me(d)},f&&f.listOfMinutes.map(function(r,b){return t.createElement("option",{value:r.value.toString(),key:b},r.label)}))),J&&t.createElement(t.Fragment,null,t.createElement(t.Fragment,null,":"),t.createElement("select",{className:"time-picker-inline-select",disabled:C,onChange:function(r){return T("seconds",r.target.value)},value:Ie(d)},f&&f.listOfSeconds.map(function(r,b){return t.createElement("option",{value:r.value.toString(),key:b},r.label)}))),f&&f.hour12&&t.createElement("select",{className:"time-picker-inline-select",disabled:C,onChange:function(r){return T("toggle",r.target.value)},value:te},t.createElement("option",{value:"am"},"AM"),t.createElement("option",{value:"pm"},"PM")))};return t.createElement(Fe,{describedby:Se["aria-describedby"],feedback:F,feedbackInvalid:Ke,feedbackValid:Ue,id:de,invalid:X===!1,label:Qe,text:$e,tooltipFeedback:_e,valid:X},t.createElement(Z,H({className:x("time-picker",(i={},i["time-picker-".concat(Ce)]=Ce,i.disabled=C,i["is-invalid"]=X===!1,i["is-valid"]=X,i),N),container:j,disabled:C,dropdownClassNames:"time-picker-dropdown",footer:je,footerContent:t.createElement("div",{className:"time-picker-footer"},k&&t.createElement(S,{color:v,size:p,variant:V,onClick:function(){Ne&&q(new Date(Ne)),Y(!1)}},k),A&&t.createElement(S,{color:$,size:I,variant:R,onClick:function(){Y(!1)}},A)),onHide:function(){Y(!1),be&&be()},onShow:function(){d&&nn(new Date(d)),Y(!0),ye&&ye()},toggler:ln(),visible:rn},Se,{ref:o}),t.createElement("div",{className:x("time-picker-body",(l={},l["time-picker-roll"]=Te==="roll",l))},Te==="select"?t.createElement(cn,null):t.createElement(t.Fragment,null,t.createElement(D,{elements:f&&f.listOfHours,onClick:function(r){return T("hours",r.toString())},selected:Ae(d,P,s)}),G&&t.createElement(D,{elements:f&&f.listOfMinutes,onClick:function(r){return T("minutes",r.toString())},selected:Me(d)}),J&&t.createElement(D,{elements:f&&f.listOfSeconds,onClick:function(r){return T("seconds",r.toString())},selected:Ie(d)}),f&&f.hour12&&t.createElement(D,{elements:[{value:"am",label:"AM"},{value:"pm",label:"PM"}],onClick:function(r){return T("toggle",r)},selected:te})))))});xe.propTypes=H(H(H({},Fe.propTypes),Z.propTypes),{ampm:n.oneOfType([n.oneOf(["auto"]),n.bool]),cancelButton:n.oneOfType([n.bool,n.node]),cancelButtonColor:(oe=S.propTypes)===null||oe===void 0?void 0:oe.color,cancelButtonSize:(ae=S.propTypes)===null||ae===void 0?void 0:ae.size,cancelButtonVariant:(le=S.propTypes)===null||le===void 0?void 0:le.variant,className:n.string,confirmButton:n.oneOfType([n.bool,n.node]),confirmButtonColor:(ce=S.propTypes)===null||ce===void 0?void 0:ce.color,confirmButtonSize:(ue=S.propTypes)===null||ue===void 0?void 0:ue.size,confirmButtonVariant:(se=S.propTypes)===null||se===void 0?void 0:se.variant,hours:n.oneOfType([n.arrayOf(n.number.isRequired),n.func]),id:n.string,inputOnChangeDelay:n.number,locale:n.string,minutes:n.oneOfType([n.bool,n.arrayOf(n.number.isRequired),n.func]),name:n.string,onTimeChange:n.func,required:n.bool,seconds:n.oneOfType([n.bool,n.arrayOf(n.number.isRequired),n.func]),time:n.oneOfType([n.instanceOf(Date),n.string]),variant:n.oneOf(["roll","select"])});xe.displayName="CTimePicker";export{Z as C,xe as a,bn as u};
